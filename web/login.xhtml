<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://xmlns.jcp.org/jsf/html" 
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">


    <h:head>

        <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
        <script src="https://apis.google.com/js/platform.js" async="true" defer="true"></script>
       <meta name="google-signin-scope" content="profile email"/>
        <meta name="google-signin-client_id"
              content="1073197191603-gv7m66ak3mo55cvr05c8sh6gh0t1icpa.apps.googleusercontent.com"/>
        <title>Connect Deal</title>

        <!--Estilos-->
        <h:outputStylesheet name="css/styles.css" />
        <meta name='viewport' 
              content='width=device-width, initial-scale=0.8, maximum-scale=0.8, 
              user-scalable=0' />
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    </h:head>
    <h:body>

        <div class="container" >
            <div class="alert" id="alert" style="">

            </div>

            <div class="card">
                <div class="cardLogin">
                    <h3>Login</h3>
                    <p>Inicia sesion para entrar</p>
                    <button id="loginCard">Iniciar sesion</button>
                </div>
                <div class="cardSignUp">
                    <h3>Registrarme</h3>
                    <p>Registrate para entrar</p>
                    <button id="signUpCard">Registrarme</button>
                </div>
            </div>
            <div class="cardForm">

                <h:form   class="loginForm">
                    <h:link outcome="/Paginas/usurs/Create" value="Show All Usurs Items"/>
                    <h:panelGroup id="messagePanel" layout="block">
                        <h:messages errorStyle="color: red" infoStyle="color: green" layout="table"/>
                    </h:panelGroup>
                    <h2>Iniciar Sesion</h2>
                    <div id="loginError"></div> 
                    <h:inputText value="#{mgtBean.selected.email}" id="Lemail"/>
                    <h:inputSecret value="#{mgtBean.selected.password}" id="Lpassword"/>
                    <h:commandButton class="button" value="Iniciar Sesion" action="#{mgtBean.login()}" />

                    <div class="shared-panel">

                    </div>
                    <div class="g-signin2" data-onsuccess="onSignIn"></div>
                   
                </h:form>
                <h:form  class="signUpForm">
                    <h2>Registrarse</h2>
                    <div id="registerError"></div> 
                    <h:inputText  id="Rname"/>
                    <h:inputText  id="Rlastname"/>
                    <h:inputText  id="Remail"/>
                    <h:inputSecret id="Rpassword"/>
                    <h:commandButton class="button" value="Registrarme"/>
                    <div class="shared-panel">
                        <a target="_blank" class="fab fa-facebook" title="Facebook"></a>	
                    </div>
                </h:form>
                <h:form style="display: none" id="fmg">
                    <input id="Goname" name="Goname" />
                    <input id="Gemail" name="Gemail" />
                    <h:commandButton id="googleA" value="gg" class="googleA" action="#{mgtBean.googleA()}"/>
                    
                </h:form>
                
                
                <script>
                    //sision de google
                   // var auth2 = gapi.auth2.getAuthInstance();
                       // auth2.signOut().then(function () {
                      //  console.log('User signed out.');
                    //});
                    //google callback. This function will redirect to our login servlet
                    function onSignIn(googleUser) {
                        var profile = googleUser.getBasicProfile();
                        console.log('ID: ' + profile.getId());
                       
                       document.getElementById("Goname").value = profile.getName();
                       document.getElementById("Gemail").value = profile.getEmail();
                       
                       console.log('Name: '+profile.getName());
                       console.log('Email: '+profile.getEmail());
                        //do not post all above info to the server because that is not secure.
                        //just send the id_toke   
                        var x = document.getElementsByClassName("googleA");
                        x[0].click();
                    }

                </script>	
            </div>

        </div>
        <div id="load" class="load">
            <div class="loader"></div>
        </div>
    </h:body>

    <!--
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.2/rollups/aes.js"></script>
    <script src="js/script.js"></script>
    
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css" integrity="sha384-vSIIfh2YWi9wW0r9iZe7RJPrKwp6bG+s9QZMoITbCckVJqGCCRhc+ccxNcdpHuYu" crossorigin="anonymous">
      
        <script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
    --> 

</html>

