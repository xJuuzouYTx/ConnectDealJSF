<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<!-- 
    Document   : verify
    Created on : Feb 26, 2021, 7:41:43 PM
    Author     : JuuzouYT
-->
<html xmlns="http://www.w3.org/1999/xhtml"
     xmlns:h="http://xmlns.jcp.org/jsf/html">
    
    <h:head>
        <meta name='viewport' content='width=device-width, initial-scale=0.8, maximum-scale=0.8, 
     user-scalable=0'/>
        <title>Verificar</title>
    </h:head>
    <h:body>
          <h:outputStylesheet name="css/styles.css"/>
         <div class="container" >
            <h:panelGroup id="messagePanel" layout="block">
                <h:messages errorStyle="color: red" infoStyle="color: green" layout="table"/>
            </h:panelGroup>
            <div class="cardVerify">
                <h:form class="formVerify">
                    <h3>Te hemos enviado un codigo de verificaci√≥n.</h3>
                    <h:inputText maxlength="6" id="authcode" value="#{authController.code}" autocomplete="off" />
                    <h:commandButton value="Verificar" action="#{authController.verifyCode()}"/>
                </h:form>
            </div>
         </div>
    </h:body>
    
    <!--Peticiones
    <script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
     <script>
        function verificar(){
            var authcode = $("#authcode").val(); 
            var xhr = new XMLHttpRequest();
                xhr.open("POST", 'VerifyCode', true);
                xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
                xhr.onreadystatechange = function() { 
                    if (this.readyState === XMLHttpRequest.DONE && this.status === 200) {
                        if(xhr.response == "1"){
                            alert("La sesion ha finalizado, por favor ingrese nuevamente!");
                            window.location = "index.jsp";
                        }else if(xhr.response == "2"){
                            alert("El codigo introducido es incorrecto, verifique e intente nuevamente!");
                        }else{
                            alert("Registrado correctamente, inicia sesion para continuar!");
                            window.location = "index.jsp";
                        }
                    }
                }
                xhr.send("authcode="+authcode);
        }
    </script>-->
</html>
